# Installation

This guide will teach you how to install Vicinae on your Linux system, be it from an already built executable or by compiling the software from source. {{ className: 'lead' }}


## Runtime dependencies

The following dependencies must be installed regardless of your installation method. You will find the list of package to install for popular distributions below. If your distribution is not listed, you should normally be able to infer the package names you need from these lists. If you got it to work on your distribution, feel free to contribute your own package list!

<CodeGroup title="Install dependencies">
```bash {{ title: 'Arch Linux' }}
pacman -Syu			\
    nodejs			\
    qt6-base		\
    qt6-svg			\
    protobuf		\
    cmark-gfm		\
    layer-shell-qt 	\
    libqalculate 	\
    minizip			\
    qtkeychain-qt6	\
```

```bash {{ title: 'Fedora' }}
dnf install -y \
    qt6-qtbase-devel \
    qt6-qtsvg-devel \
    qt6-qtbase-private-devel \
    qt6-qtwayland-devel \
    layer-shell-qt-devel \
    libqalculate-devel \
    minizip-devel \
    rapidfuzz-cpp-devel \
    qtkeychain-qt6-devel \
    openssl-devel \
    wayland-devel \
    glibc-static \
    libstdc++-static \
    zlib-devel \
    zlib-static \
    protobuf \
    cmark-gfm
# cmark-gfm requires a copr (https://copr.fedorainfracloud.org/coprs/quadratech188/cmark-gfm/)
```

```bash {{ title: 'Gentoo Linux' }}
emerge -av			\
	qtkeychain		\
	qtbase			\
	minizip-ng		\
	layer-shell-qt	\
	libqalculate	\
	nodejs			\
	cmark-gfm		\
	dev-qt/qtsvg	\
	protobuf		\
```
</CodeGroup>

## Build from source (recommended)

Building from source is the recommended way to install Vicinae if you plan on contributing later on. The build process is being tested on rolling release distributions such as Gentoo or Arch. You may run into trouble compiling if you are using a distribution that has old package versions. 

### Build requirements

- A C++23-capable compiler (GCC is recommended; Clang should also work)
- `cmake`
- `rapidfuzz-cpp` (header only, so only needed at compile time)
- `libprotoc` — the Protocol Buffers compiler (different from the runtime `libprotobuf`)
- `npm` (any version bundled with Node.js ≥ 18 should work)

You can find the exact list of package to install for supported distributions below:

<CodeGroup title="Install dependencies">
```bash {{ title: 'Arch Linux' }}
pacman -Syu			\
    base-devel 		\
    cmake			\
    ninja			\
    nodejs			\
    npm				\
    qt6-base		\
    qt6-svg			\
    protobuf		\
    cmark-gfm		\
    layer-shell-qt 	\
    libqalculate 	\
    minizip			\
    qtkeychain-qt6	\
    rapidfuzz-cpp
```

```bash {{ title: 'Fedora' }}
dnf install -y \
    qt6-qtbase-devel \
    qt6-qtsvg-devel \
    qt6-qtbase-private-devel \
    qt6-qtwayland-devel \
    layer-shell-qt-devel \
    libqalculate-devel \
    minizip-devel \
    rapidfuzz-cpp-devel \
    qtkeychain-qt6-devel \
    openssl-devel \
    wayland-devel \
    glibc-static \
    libstdc++-static \
    zlib-devel \
    zlib-static \
    abseil-cpp-devel \
    protobuf-devel \
    cmark-gfm-devel
# cmark-gfm requires a copr (https://copr.fedorainfracloud.org/coprs/quadratech188/cmark-gfm/)
```

```bash {{ title: 'Gentoo Linux' }}
emerge -av			\
	qtkeychain		\
	qtbase			\
	minizip-ng		\
	rapidfuzz-cpp	\
	layer-shell-qt	\
	libqalculate	\
	nodejs			\
	cmake			\
	cmark-gfm		\
	dev-qt/qtsvg	\
	protobuf		\
	dev-build/ninja
```
</CodeGroup>

### Build

You can execute the following commands in order to compile a release build. You should expect the build process to take about 10 minutes on modern hardware.

<CodeGroup>
```bash {{ title: 'Make' }}
make release
```

```bash {{ title: 'CMake' }}
cmake -G Ninja -B build
cmake --build build 
sudo cmake --install build
```
</CodeGroup>

### Optimized build

If you want to squeeze out the most performance you can out of Vicinae, you can enable a few optimization during configuration:

<CodeGroup>
```bash {{ title: 'Make' }}
make host-optimized
```

```bash {{ title: 'CMake' }}
CXXFLAGS="${CXXFLAGS} -march=native" cmake -DLTO=ON -G Ninja -B build
cmake --build build 
sudo cmake --install build
```
</CodeGroup>

- `-DLTO=ON` will enable link-time optimizations. This can greatly improve performance, but linkage will take a **lot** more time.
- `-march=native` compiles with all optimizations supported by the executing CPU. The resulting binary will only be able to be run on systems that support the same CPU flags.

Generally speaking, you will be trading compilation time and portability for more performance.

Note that binary releases are always compiled with link-time optimizations.

### Debug Build

For a debug build, you only need to change the `CMAKE_BUILD_TYPE` during config:

<CodeGroup>
```bash {{ title: 'Make' }}
make debug
```

```bash {{ title: 'CMake' }}
cmake -DCMAKE_BUILD_TYPE=Debug -G Ninja -B build
cmake --build build 
sudo cmake --install build
```
</CodeGroup>


This will compile with `-g3` and also enable QT debug log statements.

## Install from latest release

You can fetch the [latest release archive](https://github.com/vicinaehq/vicinae/releases), which contains:
- The compiled Vicinae binary
- A `.desktop` file (required for URL scheme support)

<Note>
Currently, the pre-built binary is dynamically linked to `libprotobuf` which upgrades quite often, and is generally not retro-compatible. If you are running an older system you will most likely run into an error when launching the binary. For now, the only workaround is to compile it from source. 
</Note>


